// Copyright (c) 2007, Yahoo! Inc. All rights reserved. Code licensed under the BSD License:http://developer.yahoo.net/yui/license.txt Copyright (C) 2009 Yahoo Japan Corporation. All Rights Reserved. Built on 2009-03-09 18:44:07
if(typeof YAHOO=="undefined"||typeof YAHOO.util.Dom=="undefined"||typeof YAHOO.util.Event=="undefined"||parseFloat(YAHOO.env.modules.yahoo.version)<2.3||parseFloat(YAHOO.env.modules.dom.version)<2.3||parseFloat(YAHOO.env.modules.event.version)<2.3){throw new Error("Userbadge depends on yahoo-dom-events.js(ver2.3.0 or later)");}YAHOO.namespace("identity.dic");YAHOO.namespace("identity.lib.define");YAHOO.namespace("identity.lib.util");YAHOO.namespace("identity.lib.widget");YAHOO.namespace("identity.lib.template");YAHOO.namespace("identity.cfg");YAHOO.namespace("identity.xhr");YAHOO.namespace("identity.box");YAHOO.namespace("identity.user");YAHOO.namespace("identity.template");YAHOO.identity.lib.util.Anim=function(B,A,C,D){if(!B){}this.init(B,A,C,D);};YAHOO.identity.lib.util.Anim.prototype={patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(A,C,B){return this.method(this.currentFrame,C,B-C,this.totalFrames);},setAttribute:function(A,C,B){if(this.patterns.noNegatives.test(A)){C=(C>0)?C:0;}YAHOO.util.Dom.setStyle(this.getEl(),A,C+B);},getAttribute:function(A){var C=this.getEl();var E=YAHOO.util.Dom.getStyle(C,A);if(E!=="auto"&&!this.patterns.offsetUnit.test(E)){return parseFloat(E);}var B=this.patterns.offsetAttribute.exec(A)||[];var F=!!(B[3]);var D=!!(B[2]);if(D||(YAHOO.util.Dom.getStyle(C,"position")=="absolute"&&F)){E=C["offset"+B[0].charAt(0).toUpperCase()+B[0].substr(1)];}else{E=0;}return E;},getDefaultUnit:function(A){if(this.patterns.defaultUnit.test(A)){return"px";}return"";},setRuntimeAttribute:function(B){var G;var C;var D=this.attributes;this.runtimeAttributes[B]={};var F=function(H){return(typeof H!=="undefined");};if(!F(D[B]["to"])&&!F(D[B]["by"])){return false;}G=(F(D[B]["from"]))?D[B]["from"]:this.getAttribute(B);if(F(D[B]["to"])){C=D[B]["to"];}else{if(F(D[B]["by"])){if(G.constructor==Array){C=[];for(var E=0,A=G.length;E<A;++E){C[E]=G[E]+D[B]["by"][E]*1;}}else{C=G+D[B]["by"]*1;}}}this.runtimeAttributes[B].start=G;this.runtimeAttributes[B].end=C;this.runtimeAttributes[B].unit=(F(D[B].unit))?D[B]["unit"]:this.getDefaultUnit(B);return true;},init:function(C,H,G,A){var B=false;var D=null;var F=0;C=YAHOO.util.Dom.get(C);this.attributes=H||{};this.duration=!YAHOO.lang.isUndefined(G)?G:1;this.method=A||YAHOO.identity.lib.util.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=YAHOO.identity.lib.util.AnimMgr.fps;this.setEl=function(K){C=YAHOO.util.Dom.get(K);};this.getEl=function(){return C;};this.isAnimated=function(){return B;};this.getStartTime=function(){return D;};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false;}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(YAHOO.identity.lib.util.AnimMgr.fps*this.duration):this.duration;if(this.duration===0&&this.useSeconds){this.totalFrames=1;}YAHOO.identity.lib.util.AnimMgr.registerElement(this);return true;};this.stop=function(K){if(K){this.currentFrame=this.totalFrames;this._onTween.fire();}YAHOO.identity.lib.util.AnimMgr.stop(this);};var J=function(){this.onStart.fire();this.runtimeAttributes={};for(var K in this.attributes){this.setRuntimeAttribute(K);}B=true;F=0;D=new Date();};var I=function(){var M={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};this.onTween.fire(M);var L=this.runtimeAttributes;for(var K in L){this.setAttribute(K,this.doMethod(K,L[K].start,L[K].end),L[K].unit);}F+=1;};var E=function(){var K=(new Date()-D)/1000;var L={duration:K,frames:F,fps:F/K};B=false;F=0;this.onComplete.fire(L);};this._onStart=new YAHOO.util.CustomEvent("_start",this,true);this.onStart=new YAHOO.util.CustomEvent("start",this);this.onTween=new YAHOO.util.CustomEvent("tween",this);this._onTween=new YAHOO.util.CustomEvent("_tween",this,true);this.onComplete=new YAHOO.util.CustomEvent("complete",this);this._onComplete=new YAHOO.util.CustomEvent("_complete",this,true);this._onStart.subscribe(J);this._onTween.subscribe(I);this._onComplete.subscribe(E);}};YAHOO.identity.lib.util.AnimMgr=new function(){var C=null;var B=[];var A=0;this.fps=1000;this.delay=1;this.registerElement=function(F){B[B.length]=F;A+=1;F._onStart.fire();this.start();};this.unRegister=function(G,F){G._onComplete.fire();F=F||E(G);if(F==-1){return false;}B.splice(F,1);A-=1;if(A<=0){this.stop();}return true;};this.start=function(){if(C===null){C=setInterval(this.run,this.delay);}};this.stop=function(H){if(!H){clearInterval(C);for(var G=0,F=B.length;G<F;++G){if(B[0].isAnimated()){this.unRegister(B[0],0);}}B=[];C=null;A=0;}else{this.unRegister(H);}};this.run=function(){for(var H=0,F=B.length;H<F;++H){var G=B[H];if(!G||!G.isAnimated()){continue;}if(G.currentFrame<G.totalFrames||G.totalFrames===null){G.currentFrame+=1;if(G.useSeconds){D(G);}G._onTween.fire();}else{YAHOO.identity.lib.util.AnimMgr.stop(G,H);}}};var E=function(H){for(var G=0,F=B.length;G<F;++G){if(B[G]==H){return G;}}return -1;};var D=function(G){var J=G.totalFrames;var I=G.currentFrame;var H=(G.currentFrame*G.duration*1000/G.totalFrames);var F=(new Date()-G.getStartTime());var K=0;if(F<G.duration*1000){K=Math.round((F/H-1)*G.currentFrame);}else{K=J-(I+1);}if(K>0&&isFinite(K)){if(G.currentFrame+K>=J){K=J-(I+1);}G.currentFrame+=K;}};};YAHOO.identity.lib.util.Bezier=new function(){this.getPosition=function(E,D){var F=E.length;var C=[];for(var B=0;B<F;++B){C[B]=[E[B][0],E[B][1]];}for(var A=1;A<F;++A){for(B=0;B<F-A;++B){C[B][0]=(1-D)*C[B][0]+D*C[parseInt(B+1,10)][0];C[B][1]=(1-D)*C[B][1]+D*C[parseInt(B+1,10)][1];}}return[C[0][0],C[0][1]];};};YAHOO.identity.lib.util.Easing={easeOut:function(B,A,D,C){return -D*(B/=C)*(B-2)+A;}};(function(){YAHOO.identity.lib.util.Motion=function(H,G,I,J){if(H){YAHOO.identity.lib.util.Motion.superclass.constructor.call(this,H,G,I,J);}};YAHOO.extend(YAHOO.identity.lib.util.Motion,YAHOO.identity.lib.util.Anim);var E=YAHOO.util;var A=YAHOO.identity.lib.util;var F=A.Motion.superclass;var C=A.Motion.prototype;C.patterns.points=/^points$/i;C.setAttribute=function(G,I,H){if(this.patterns.points.test(G)){H=H||"px";F.setAttribute.call(this,"left",I[0],H);F.setAttribute.call(this,"top",I[1],H);}else{F.setAttribute.call(this,G,I,H);}};C.getAttribute=function(G){if(this.patterns.points.test(G)){var H=[F.getAttribute.call(this,"left"),F.getAttribute.call(this,"top")];}else{H=F.getAttribute.call(this,G);}return H;};C.doMethod=function(G,K,H){var J=null;if(this.patterns.points.test(G)){var I=this.method(this.currentFrame,0,100,this.totalFrames)/100;J=A.Bezier.getPosition(this.runtimeAttributes[G],I);}else{J=F.doMethod.call(this,G,K,H);}return J;};C.setRuntimeAttribute=function(P){if(this.patterns.points.test(P)){var H=this.getEl();var J=this.attributes;var G;var L=J["points"]["control"]||[];var I;var M,O;if(L.length>0&&!(L[0] instanceof Array)){L=[L];}else{var K=[];for(M=0,O=L.length;M<O;++M){K[M]=L[M];}L=K;}if(E.Dom.getStyle(H,"position")=="static"){E.Dom.setStyle(H,"position","relative");}if(D(J["points"]["from"])){E.Dom.setXY(H,J["points"]["from"]);}else{E.Dom.setXY(H,E.Dom.getXY(H));}G=this.getAttribute("points");if(D(J["points"]["to"])){I=B.call(this,J["points"]["to"],G);var N=E.Dom.getXY(this.getEl());for(M=0,O=L.length;M<O;++M){L[M]=B.call(this,L[M],G);}}else{if(D(J["points"]["by"])){I=[G[0]+J["points"]["by"][0],G[1]+J["points"]["by"][1]];for(M=0,O=L.length;M<O;++M){L[M]=[G[0]+L[M][0],G[1]+L[M][1]];}}}this.runtimeAttributes[P]=[G];if(L.length>0){this.runtimeAttributes[P]=this.runtimeAttributes[P].concat(L);}this.runtimeAttributes[P][this.runtimeAttributes[P].length]=I;}else{F.setRuntimeAttribute.call(this,P);}};var B=function(G,I){var H=E.Dom.getXY(this.getEl());G=[G[0]-H[0]+I[0],G[1]-H[1]+I[1]];return G;};var D=function(G){return(typeof G!=="undefined");};})();YAHOO.identity.lib.define={DEBUG:false,XHR_IDENTITY_HOST:"http://profiles.yahoo.co.jp",XHR_IDENTITY_HOST_SSL:"https://msg.profiles.yahoo.co.jp",XHR_IDENTITY_PATH:"/-/xhr/bridge.v1.identity.html",MESSAGE_IFRAME_HOST:"https://msg.profiles.yahoo.co.jp",MESSAGE_IFRAME_PATH:"/-/xhr/bridge.v2.1.message.html",MESSAGE_MAX_LENGTH_SUBJECT:40,MESSAGE_MAX_LENGTH_TESTIMONIAL:100,MESSAGE_MAX_LENGTH_BODY:1000,MESSAGE_MAX_LENGTH_FRIENDLIST:20,ADS_IGNORE:"ignore",ADS_IGNORECANCEL:"ignore_cancel",ADS_IGNORE_COMPLETE:"ignore_complete",ADS_IGNORECANCEL_COMPLETE:"ignore_cancel_complete",ADS_FRIEND:"friend",ADS_FRIEND_COMPLETE:"friend_complete",ADS_TESTIMONIAL:"testimonial",ADS_TESTIMONIAL_COMPLETE:"testimonial_complete",ADS_MESSAGE:"message",ADS_MESSAGE_COMPLETE:"message_complete",YIMG_BASE:"http://i.yimg.jp/images/socialproducts/common/usercard/v2.1/",YIMG_BASE_SSL:"https://s.yimg.jp/images/socialproducts/common/usercard/v2.1/",YIMG_DIC_UTF8_JS:"js/dic.utf8.js",YIMG_DIC_EUC_JS:"js/dic.euc.js",YIMG_IMAGEROTATION_JS:"js/imagerotation.js",YIMG_BOX_JS:"js/box.js",YIMG_MESSAGE_JS:"js/message.js",YIMG_FRIEND_JS:"js/friend.js",YIMG_TESTIMONIAL_JS:"js/testimonial.js"};YAHOO.identity.lib.util.extendObject=function(A,C){for(var B in C){A[B]=C[B];}return A;};YAHOO.identity.lib.util.syncAddListener=function(A){var C=10;if(!A||!A.check||!A.exec){return false;}var B=function(E){var D=false;try{D=E.check();}catch(F){}if(D){E.args?E.exec(E.args):E.exec();}else{if(YAHOO.env.ua.ie>=6){window.setTimeout(function(){B.call(this,E);},C);}else{window.setTimeout(B,C,E);}}};if(YAHOO.env.ua.ie>=6){window.setTimeout(function(){B.call(this,A);},C);}else{window.setTimeout(B,C,A);}};YAHOO.identity.lib.util.inArray=function(C,A){for(var B in A){if(A[B]==C){return true;}}return false;};YAHOO.identity.lib.util.getParams=function(B){B=B||location.href;var G=new Object();var F=B.replace(/^(.+)\?/,"");var E=F.split("&");for(var C=0;C<E.length;C++){var H=E[C].indexOf("=");if(H==-1){continue;}var A=E[C].substring(0,H);var D=E[C].substring(H+1);D=decodeURIComponent(D);G[A]=D;}return G;};YAHOO.identity.lib.util.setDoneAndSrc=function(A){var C=YAHOO.identity.lib.util.getParams(A);if(!C){return false;}if(C[".src"]){YAHOO.identity.cfg._src=C[".src"];}else{if(YAHOO.identity.cfg.src!="prf"){YAHOO.identity.cfg._src=YAHOO.identity.cfg.src;}}if(C[".done"]){YAHOO.identity.cfg._done=encodeURIComponent(C[".done"]);}else{if(YAHOO.identity.cfg.src!="prf"){var B=C["url"]||A;YAHOO.identity.cfg._done=encodeURIComponent(B);}}};YAHOO.identity.lib.util.sprintf=function(L){var E,I,G,J,C,A,K,B,F,D=1,H=L.split("");for(E=0,F=H.length;E<=F;E++){if(H[E]=="%"){J=arguments[D++];C=B=G="",I=0,A=" ";switch(typeof (J)){case"object":if(J==null){J="";}break;case"undefined":throw new Error("too few arguments");break;}do{K=H[E],H[E++]="";switch(K){case"$":J=arguments[B];B="";break;case".":if(B==""){B=0;}G=H[E],H[E++]="";break;case"%":K=H[E];break;case"+":if(C==""){C="+";}break;case"-":I=1;break;case"'":A=H[E],H[E++]="";break;case"0":if(B==""){A=K;break;}if(G==""){B+=K;}else{G+=K;}break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(G==""){B+=K;}else{G+=K;}break;default:E--;break;}}while("#"<K&&K<":");B=(B=="")?0:Number(B);if(!isNaN(Number(J))){if(J<0){C="";}if(G!=""){J=J.toFixed(G);}}switch(K){case"%":D--;H[E]=K;continue;case"F":J=J.toFixed(6);break;case"f":J=J.toFixed(6);break;case"o":J=J.toString(8);break;case"u":J=J.toString(10);break;case"d":J=J.toString(10);break;case"c":J=String.fromCharCode(J);break;case"b":J=parseInt(J).toString(2);break;case"x":J=J.toString(16).toLowerCase();break;case"X":J=J.toString(16).toUpperCase();break;case"e":J=parseInt(J).toExponential(G||5);break;case"s":C="";if(G!=""){J=J.slice(0,G);}break;}if(J.length<B){if(I){J=J+Array(B-J.length-C.length+1).join(A);}else{J=Array(B-J.length-C.length+1).join(A)+J;}}H[E]=C+J;}}return H.join("");};YAHOO.identity.lib.util.buildQuery=function(B){var A=[];for(k in B){if(!B.hasOwnProperty(k)){continue;}if(typeof B[k]=="undefined"){continue;}A.push(k+"="+B[k]);}return A.length?"?"+A.join("&"):"";};YAHOO.identity.lib.util.makeElement=function(I,D,C){if(arguments.length==2&&(D instanceof Array||typeof D=="string")){C=D;D=null;}if(YAHOO.env.ua.ie>=6&&((I.toLowerCase()=="input"&&D&&D["type"]=="radio")||(I.toLowerCase()=="input"&&D&&D["type"]=="checkbox")||I.toLowerCase()=="map")){var H=I.toLowerCase();var E="";for(var A in D){if(!D.hasOwnProperty(A)){continue;}E+=" "+A.toLowerCase()+'="'+D[A]+'"';}E="<"+H+E+">";return document.createElement(E);}var G=document.createElement(I);if(D){for(var A in D){if(!D.hasOwnProperty(A)){continue;}if(A=="class"){YAHOO.util.Dom.addClass(G,D[A]);}else{G.setAttribute(A,D[A]);}}}if(C!=null){if(C instanceof Array){for(var F=0;F<C.length;F++){var B=C[F];if(typeof B=="string"){B=document.createTextNode(B);}else{if(typeof B=="number"){B=document.createTextNode(String(B));}}G.appendChild(B);}}else{if(typeof C=="string"){G.appendChild(document.createTextNode(C));}else{if(typeof B=="number"){G.appendChild(document.createTextNode(String(C)));}else{G.appendChild(C);}}}}return G;};YAHOO.identity.lib.util.adjustImageSizes=function(A,B,E){var C=B;var F=E;var G="";var D=E/B;if(D>1){G="h";}else{G="w";}if(G=="h"){F=(A<E)?A:E;C=Math.round(F/D);}else{if(G=="w"){C=(A<B)?A:B;F=Math.round(C*D);}}return[C,F];};YAHOO.identity.lib.util.htmlEntityDecode=function(A){A=A.replace(/&amp;/g,"&");A=A.replace(/&gt;/g,">");A=A.replace(/&lt;/g,"<");A=A.replace(/&quot;/g,'"');A=A.replace(/&#039;/g,"'");A=A.replace(/&#39;/g,"'");return A;};YAHOO.identity.lib.util.htmlEntityEncode=function(A){A=A.replace(/\&/g,"&amp;");A=A.replace(/\>/g,"&gt;");A=A.replace(/\</g,"&lt;");A=A.replace(/\"/g,"&quot;");A=A.replace(/\'/g,"&#039;");return A;};YAHOO.identity.lib.util.addWbrTag=function(I,C){var E=YAHOO.identity.lib.util;C=(typeof C=="undefined")?1:C;var H=YAHOO.env.ua.webkit?'<span class="wbr"></span>':"<wbr>";var G=E.htmlEntityDecode(I);var A=[];var F=[];var B=G.length;for(var D=0;D<B;D+=C){F.push(E.htmlEntityEncode(G.substring(D,(D+C))));}return F.join(H);};YAHOO.identity.lib.util.isSsl=function(){return(location.protocol=="https:")?true:false;};YAHOO.identity.lib.util.getYimgBase=function(A){return A?"https://s.yimg.jp":"http://i.yimg.jp";};YAHOO.identity.lib.util.getCharSet=function(){var C="";var A=document.getElementsByTagName("meta");if(!A){throw new Error("could not get meta tags.");}for(var B=0;B<A.length;B++){C=A[B].getAttribute("content");if(C){C=C.toLowerCase();if(C.indexOf("charset=")!=-1){break;}}}if(C.indexOf("utf-8")!=-1){return"utf8";}else{if(C.indexOf("euc-jp")!=-1){return"euc";}else{throw new Error("Userbadge supports UTF-8 and EUC-JP only.");}}};YAHOO.identity.lib.util.isSupportedBrowser=function(){var A=YAHOO.env.ua;if((A.gecko>=1.9||A.ie>=7||A.webkit>=419)&&A.opera==0){return true;}else{return false;}};YAHOO.identity.lib.util.closeBox=function(){var A=YAHOO.identity.cfg.url;open(A,"_parent");if(YAHOO.env.ua.webkit){setTimeout(function(){open(A,"_parent");},1000);}};YAHOO.identity.lib.util.getDate=function(){var B=new Date();var D=B.getFullYear();var A=B.getMonth()+1;var C=B.getDate();A=(A<10)?"0"+A:""+A;C=(C<10)?"0"+C:""+C;return D+A+C;};YAHOO.identity.lib.util.loadJS=function(C){if(!C||typeof C=="undefined"){return false;}var A=document.getElementsByTagName("head");if(!A||!A[0]){throw new Error("head element is not exist.");}var B=A[0];var D=document.createElement("script");D.setAttribute("type","text/javascript");D.setAttribute("src",C+"?"+YAHOO.identity.lib.util.getDate());B.appendChild(D);};YAHOO.identity.lib.util.loadCSS=function(D){if(!D||typeof D=="undefined"){return false;}var A=document.getElementsByTagName("head");if(!A||!A[0]){throw new Error("head element is not exist.");}var C=A[0];var B=document.createElement("link");B.setAttribute("rel","stylesheet");B.setAttribute("type","text/css");B.setAttribute("media","all");B.setAttribute("href",D+"?"+YAHOO.identity.lib.util.getDate());C.appendChild(B);};YAHOO.identity.lib.ad=function(E){if(!E){return false;}if(!YAHOO.identity.ad){var A={"src":"#adproxy","frameborder":"0"};var D=YAHOO.identity.lib.util.makeElement("iframe",A);D.style.visibility="hidden";D.style.width="1px";D.style.height="1px";YAHOO.identity.ad=document.body.appendChild(D);}var C="http://profiles.yahoo.co.jp",G="https://msg.profiles.yahoo.co.jp",F="/-/userbadge/ads/",B=YAHOO.identity.cfg.ssl?G:C;B+=F+"?type="+E+"&ts="+(new Date()).getTime();window.setTimeout(function(){YAHOO.identity.ad.src=B;},500);};YAHOO.identity.lib.xhr=function(C,E){this._host=C;this._path=E;this._iframe=null;if(this._iframe===null){var A=this._host+this._path;var D=document.getElementsByTagName("iframe");for(var B=0;B<D.length;B++){if(D[B].src==A){this._iframe=D[B];return this;}}this._iframe=document.createElement("iframe");this._iframe.style.visibility="hidden";this._iframe.style.width="1px";this._iframe.style.height="1px";this._iframe.setAttribute("src",A);document.body.appendChild(this._iframe);}};YAHOO.identity.lib.util.extendObject(YAHOO.identity.lib.xhr.prototype,{start:function(A,B,C){if(!this.alive()){throw new Error("xhr object is not alive.");}this._iframe.contentWindow.xhr(this._host+A,B,C);},alive:function(){try{if(!this._iframe.contentWindow.xhr){return false;}return true;}catch(A){return false;}},destroy:function(){if(!this.alive()){throw new Error("xhr object is not alive already.");return false;}document.body.removeChild(this._iframe);}});YAHOO.identity.lib.console=(function(){var G=["log","debug","info","warn","error","assert","dir","dirxml","trace","group","groupEnd","time","timeEnd","profile","profileEnd","count"];var F={};for(var B=0;B<G.length;B++){var D=G[B];if(YAHOO.identity.lib.define.DEBUG){var A='typeof console!="undefined" && typeof console.'+D+'!="undefined"';var E="var args=(arguments.length==1)?arguments[0]:arguments; console."+D+"(args);";var C="if("+A+"){"+E+"}";F[D]=new Function(C);}else{F[D]=new Function("");}}return F;})();try{document.domain="yahoo.co.jp";}catch(e){}if(typeof window["avt_getAvatar_jump_yae"]!="function"){throw new Error("Userbadge depends on avatar_multi.js");}YAHOO.identity.Init=function(){var M=YAHOO.util.Event,A=YAHOO.util.Dom,K=YAHOO.identity,I=K.lib,N=K.dic,G=K.template,F=K.user,B=K.cfg,H=I.define,L=I.util,C=YAHOO.env.ua;if(C.webkit){YAHOO.identity.xhr.identity=new I.xhr(H.XHR_IDENTITY_HOST,H.XHR_IDENTITY_PATH);}YAHOO.identity.BoxBridge=function(){L.syncAddListener({"check":function(){var E=(YAHOO.identity.Box)?true:false;return E;},"exec":function(){YAHOO.identity.Box();}});if(!YAHOO.identity.Box){var D=B.ssl?H.YIMG_BASE_SSL:H.YIMG_BASE;L.loadJS(D+H.YIMG_BOX_JS);}};YAHOO.identity.Messenger=function(){open("http://edit.msg.yahoo.co.jp/config/send_webmesg?.src=pg&.target="+F.yid,"_blank");};YAHOO.identity.ActionButton=function(){YAHOO.identity.cfg.type=this.childNodes[0].name;switch(B.type){case"registFriend":case"sendMessage":case"sendTestimonial":case"editTestimonial":case"addToIgnoreList":case"removeFromIgnoreList":YAHOO.identity.BoxBridge();return true;case"sendMessenger":YAHOO.identity.Messenger();return true;case"registFriendInProcess":case"sendTestimonialInProcess":return false;default:for(var E=0;E<F.actions.length;E++){var D=F.actions[E];if(B.type==D.id&&typeof window[D.id]=="function"){window[D.id](D.args);}}return true;}};(function(){if(!F.actions){return false;}var R=false,V=F.actions,D=L.makeElement,P=A.get("yahooIdentityUserCardActionButtonContainer"),O=A.get("yahooIdentityUserCardActionButtonMenus");for(var Q=0;Q<V.length;Q++){V[Q]._defaultmenu=V[Q].label?false:true;V[Q].label=V[Q].label||N.Common.actionButton[V[Q].id];}var X=D("a",{"href":"#actionbutton","name":V[0].id,"class":"yahooIdentityUserCardActionButtonAnchor "+V[0].id},[V[0].label]);var U=D("div",{"class":"yahooIdentityUserCardActionButtonMain"},[X]);if(!V[0].disabled){A.setStyle(X,"color","#000");M.addListener(X,"mouseover",function(){A.addClass(this.parentNode,"yahooIdentityUserCardActionButtonMainHighlight");A.removeClass(this.parentNode,"yahooIdentityUserCardActionButtonAnchor");});M.addListener(X,"mouseout",function(){A.addClass(this.parentNode,"yahooIdentityUserCardActionButtonMain");A.removeClass(this.parentNode,"yahooIdentityUserCardActionButtonMainHighlight");});U.onclick=YAHOO.identity.ActionButton;}else{A.setStyle(X,"color","#ccc");A.setStyle(X,"cursor","default");}P.appendChild(U);var W=D("div",{"class":"yahooIdentityUserCardActionButtonSub"});if(V.length>=2){M.addListener(W,"mouseover",function(){A.addClass(this,"yahooIdentityUserCardActionButtonSubHighlight");});M.addListener(W,"mouseout",function(){if(!R){A.removeClass(this,"yahooIdentityUserCardActionButtonSubHighlight");}});}P.appendChild(W);var E=(function(Z){var d=D("div");var c=false;for(var b=1;b<V.length;b++){if(!V[b-1]._defaultmenu&&V[b]._defaultmenu){d.appendChild(D("div",{"class":"dot"}));c=true;}var Y=V[b];var f=D("div",{"class":"menu"});if(Y.disabled){if(Y.id.match(/InProcess$/)){f.innerHTML='<div class="'+Y.id+'"><span>('+Y.label+")</span></div>";}else{var g=L.getYimgBase(L.isSsl())+"/images/socialproducts/common/usercard/v2.1/img/menu/disable_16.gif";f.innerHTML='<div class="'+Y.id+'"><span>'+Y.label+'<img src="'+g+'"></span></div>';}}else{f.innerHTML='<a class="'+Y.id+'" name="'+Y.id+'" href="#actionbutton"><span>'+Y.label+"</span></a>";M.addListener(f,"click",YAHOO.identity.ActionButton);}d.appendChild(f);}d.appendChild(D("div",{"class":"bottom"}));var a=(V.length-1)*25+3;if(c){a+=5;}A.setStyle(Z,"height",a+"px");return Z.appendChild(d);})(O);if(C.ie==7){A.setX(O,0);}A.setStyle(P,"display","block");if(V.length>=2){var T=function(c){var Y=c.target||c.srcElement;if(!R){return false;}if(Y==W){M.removeListener(W,"click",S);}var a=A.getX(U);var Z=A.getY(U)+U.offsetHeight;if(C.gecko==1.8){a+=2;}var b=new L.Motion(E,{points:{to:[a,Z-O.offsetHeight],from:[a,Z]}},0.1,L.Easing.easeOut);b.onComplete.subscribe(function(){A.setStyle(O,"visibility","hidden");if(Y==W){M.addListener(W,"click",S);}});b.animate();A.removeClass(W,"yahooIdentityUserCardActionButtonSubHighlight");A.removeClass(W,"yahooIdentityUserCardActionButtonSubPushed");M.removeListener(document,"mouseup",T);R=false;};var S=function(a){if(R){return false;}R=true;A.setStyle(O,"visibility","visible");A.addClass(W,"yahooIdentityUserCardActionButtonSubPushed");var Z=A.getX(U);var Y=A.getY(U)+U.offsetHeight;if(C.gecko==1.8){Z+=2;}A.setXY(O,[Z,Y]);(new L.Motion(E,{points:{from:[Z,Y-O.offsetHeight],to:[Z,Y]}},0.25,L.Easing.easeOut)).animate();M.addListener(document,"mouseup",T);};M.addListener(W,"click",S);}})();(function(){var O=A.get("yahooIdentityUserCardThumbnailInner");var Q=A.get("yahooIdentityUserCardThumbnailImage");var R=A.get("yahooIdentityUserCardThumbnailJsAvatar");if(!O||!Q||!R){return false;}var E=function(T){var S=T.getElementsByTagName("img");return(S.length==0)?false:S[0];};var D=function(S){var U=(typeof S=="string")?S:S.src;var T=/^http\:\/\/avtimg\.yahoo\.co\.jp\//i;return(U.match(T)!=null)?true:false;};var P=E(Q);if(D(P)){A.setStyle(P,"display","none");A.setStyle(R,"display","block");A.addClass(O,"yahooIdentityUserCardThumbnailInnerAvt");}})();if(B.src=="prf"){var J=B.ssl?H.YIMG_BASE_SSL:H.YIMG_BASE;L.loadJS(J+H.YIMG_IMAGEROTATION_JS);}};YAHOO.util.Event.onDOMReady(function(){var C=YAHOO.util.Dom,B=YAHOO.identity,E=B.lib.define,A=B.lib.util,F=B.cfg;window.setTimeout(function(){if(F.exec==false){return false;}if(!A.isSupportedBrowser()){return false;}var G=C.get("yahooIdentityUserCard").getElementsByTagName("form")[0];if(G){G.style.display="none";}YAHOO.identity.cfg.enc=A.getCharSet();YAHOO.identity.cfg.ssl=A.isSsl();var D=F.ssl?E.YIMG_BASE_SSL:E.YIMG_BASE;if(F.enc=="utf8"||YAHOO.env.ua.webkit){A.loadJS(D+E.YIMG_DIC_UTF8_JS);}else{if(F.enc=="euc"){A.loadJS(D+E.YIMG_DIC_EUC_JS);}else{return false;}}A.syncAddListener({"check":function(){return YAHOO.identity.dic.Common?true:false;},"exec":YAHOO.identity.Init});},100);});